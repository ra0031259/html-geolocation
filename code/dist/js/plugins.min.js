!function(root,doc,factory){"function"==typeof define&&define.amd?define(["jquery"],function($){return factory($,root,doc),$.mobile}):factory(root.jQuery,root,doc)}(this,document,function(jQuery,window,document,undefined){!function($,window,document,undefined){function getNativeEvent(event){for(;event&&"undefined"!=typeof event.originalEvent;)event=event.originalEvent;return event}function createVirtualEvent(event,eventType){var oe,props,ne,prop,ct,touch,i,j,len,t=event.type;if(event=$.Event(event),event.type=eventType,oe=event.originalEvent,props=$.event.props,t.search(/^(mouse|click)/)>-1&&(props=mouseEventProps),oe)for(i=props.length,prop;i;)prop=props[--i],event[prop]=oe[prop];if(t.search(/mouse(down|up)|click/)>-1&&!event.which&&(event.which=1),-1!==t.search(/^touch/)&&(ne=getNativeEvent(oe),t=ne.touches,ct=ne.changedTouches,touch=t&&t.length?t[0]:ct&&ct.length?ct[0]:undefined))for(j=0,len=touchEventProps.length;len>j;j++)prop=touchEventProps[j],event[prop]=touch[prop];return event}function getVirtualBindingFlags(element){for(var b,k,flags={};element;){b=$.data(element,dataPropertyName);for(k in b)b[k]&&(flags[k]=flags.hasVirtualBinding=!0);element=element.parentNode}return flags}function getClosestElementWithVirtualBinding(element,eventType){for(var b;element;){if(b=$.data(element,dataPropertyName),b&&(!eventType||b[eventType]))return element;element=element.parentNode}return null}function enableTouchBindings(){blockTouchTriggers=!1}function disableTouchBindings(){blockTouchTriggers=!0}function enableMouseBindings(){lastTouchID=0,clickBlockList.length=0,blockMouseTriggers=!1,disableTouchBindings()}function disableMouseBindings(){enableTouchBindings()}function startResetTimer(){clearResetTimer(),resetTimerID=setTimeout(function(){resetTimerID=0,enableMouseBindings()},$.vmouse.resetTimerDuration)}function clearResetTimer(){resetTimerID&&(clearTimeout(resetTimerID),resetTimerID=0)}function triggerVirtualEvent(eventType,event,flags){var ve;return(flags&&flags[eventType]||!flags&&getClosestElementWithVirtualBinding(event.target,eventType))&&(ve=createVirtualEvent(event,eventType),$(event.target).trigger(ve)),ve}function mouseEventCallback(event){var ve,touchID=$.data(event.target,touchTargetPropertyName);blockMouseTriggers||lastTouchID&&lastTouchID===touchID||(ve=triggerVirtualEvent("v"+event.type,event),ve&&(ve.isDefaultPrevented()&&event.preventDefault(),ve.isPropagationStopped()&&event.stopPropagation(),ve.isImmediatePropagationStopped()&&event.stopImmediatePropagation()))}function handleTouchStart(event){var target,flags,t,touches=getNativeEvent(event).touches;touches&&1===touches.length&&(target=event.target,flags=getVirtualBindingFlags(target),flags.hasVirtualBinding&&(lastTouchID=nextTouchID++,$.data(target,touchTargetPropertyName,lastTouchID),clearResetTimer(),disableMouseBindings(),didScroll=!1,t=getNativeEvent(event).touches[0],startX=t.pageX,startY=t.pageY,triggerVirtualEvent("vmouseover",event,flags),triggerVirtualEvent("vmousedown",event,flags)))}function handleScroll(event){blockTouchTriggers||(didScroll||triggerVirtualEvent("vmousecancel",event,getVirtualBindingFlags(event.target)),didScroll=!0,startResetTimer())}function handleTouchMove(event){if(!blockTouchTriggers){var t=getNativeEvent(event).touches[0],didCancel=didScroll,moveThreshold=$.vmouse.moveDistanceThreshold,flags=getVirtualBindingFlags(event.target);didScroll=didScroll||Math.abs(t.pageX-startX)>moveThreshold||Math.abs(t.pageY-startY)>moveThreshold,didScroll&&!didCancel&&triggerVirtualEvent("vmousecancel",event,flags),triggerVirtualEvent("vmousemove",event,flags),startResetTimer()}}function handleTouchEnd(event){if(!blockTouchTriggers){disableTouchBindings();var ve,t,flags=getVirtualBindingFlags(event.target);triggerVirtualEvent("vmouseup",event,flags),didScroll||(ve=triggerVirtualEvent("vclick",event,flags),ve&&ve.isDefaultPrevented()&&(t=getNativeEvent(event).changedTouches[0],clickBlockList.push({touchID:lastTouchID,x:t.clientX,y:t.clientY}),blockMouseTriggers=!0)),triggerVirtualEvent("vmouseout",event,flags),didScroll=!1,startResetTimer()}}function hasVirtualBindings(ele){var k,bindings=$.data(ele,dataPropertyName);if(bindings)for(k in bindings)if(bindings[k])return!0;return!1}function dummyMouseHandler(){}function getSpecialEventObject(eventType){var realType=eventType.substr(1);return{setup:function(){hasVirtualBindings(this)||$.data(this,dataPropertyName,{});var bindings=$.data(this,dataPropertyName);bindings[eventType]=!0,activeDocHandlers[eventType]=(activeDocHandlers[eventType]||0)+1,1===activeDocHandlers[eventType]&&$document.bind(realType,mouseEventCallback),$(this).bind(realType,dummyMouseHandler),eventCaptureSupported&&(activeDocHandlers.touchstart=(activeDocHandlers.touchstart||0)+1,1===activeDocHandlers.touchstart&&$document.bind("touchstart",handleTouchStart).bind("touchend",handleTouchEnd).bind("touchmove",handleTouchMove).bind("scroll",handleScroll))},teardown:function(){--activeDocHandlers[eventType],activeDocHandlers[eventType]||$document.unbind(realType,mouseEventCallback),eventCaptureSupported&&(--activeDocHandlers.touchstart,activeDocHandlers.touchstart||$document.unbind("touchstart",handleTouchStart).unbind("touchmove",handleTouchMove).unbind("touchend",handleTouchEnd).unbind("scroll",handleScroll));var $this=$(this),bindings=$.data(this,dataPropertyName);bindings&&(bindings[eventType]=!1),$this.unbind(realType,dummyMouseHandler),hasVirtualBindings(this)||$this.removeData(dataPropertyName)}}}var threshold,i,dataPropertyName="virtualMouseBindings",touchTargetPropertyName="virtualTouchID",virtualEventNames="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),touchEventProps="clientX clientY pageX pageY screenX screenY".split(" "),mouseHookProps=$.event.mouseHooks?$.event.mouseHooks.props:[],mouseEventProps=$.event.props.concat(mouseHookProps),activeDocHandlers={},resetTimerID=0,startX=0,startY=0,didScroll=!1,clickBlockList=[],blockMouseTriggers=!1,blockTouchTriggers=!1,eventCaptureSupported="addEventListener"in document,$document=$(document),nextTouchID=1,lastTouchID=0;for($.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500},i=0;i<virtualEventNames.length;i++)$.event.special[virtualEventNames[i]]=getSpecialEventObject(virtualEventNames[i]);eventCaptureSupported&&document.addEventListener("click",function(e){var x,y,ele,i,o,touchID,cnt=clickBlockList.length,target=e.target;if(cnt)for(x=e.clientX,y=e.clientY,threshold=$.vmouse.clickDistanceThreshold,ele=target;ele;){for(i=0;cnt>i;i++)if(o=clickBlockList[i],touchID=0,ele===target&&Math.abs(o.x-x)<threshold&&Math.abs(o.y-y)<threshold||$.data(ele,touchTargetPropertyName)===o.touchID)return e.preventDefault(),void e.stopPropagation();ele=ele.parentNode}},!0)}(jQuery,window,document),function($){$.mobile={}}(jQuery),function($,undefined){var support={touch:"ontouchend"in document};$.mobile.support=$.mobile.support||{},$.extend($.support,support),$.extend($.mobile.support,support)}(jQuery),function($,window,undefined){function triggerCustomEvent(obj,eventType,event,bubble){var originalType=event.type;event.type=eventType,bubble?$.event.trigger(event,undefined,obj):$.event.dispatch.call(obj,event),event.type=originalType}var $document=$(document),supportTouch=$.mobile.support.touch,scrollEvent="touchmove scroll",touchStartEvent=supportTouch?"touchstart":"mousedown",touchStopEvent=supportTouch?"touchend":"mouseup",touchMoveEvent=supportTouch?"touchmove":"mousemove";$.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(i,name){$.fn[name]=function(fn){return fn?this.bind(name,fn):this.trigger(name)},$.attrFn&&($.attrFn[name]=!0)}),$.event.special.scrollstart={enabled:!0,setup:function(){function trigger(event,state){scrolling=state,triggerCustomEvent(thisObject,scrolling?"scrollstart":"scrollstop",event)}var scrolling,timer,thisObject=this,$this=$(thisObject);$this.bind(scrollEvent,function(event){$.event.special.scrollstart.enabled&&(scrolling||trigger(event,!0),clearTimeout(timer),timer=setTimeout(function(){trigger(event,!1)},50))})},teardown:function(){$(this).unbind(scrollEvent)}},$.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var thisObject=this,$this=$(thisObject),isTaphold=!1;$this.bind("vmousedown",function(event){function clearTapTimer(){clearTimeout(timer)}function clearTapHandlers(){clearTapTimer(),$this.unbind("vclick",clickHandler).unbind("vmouseup",clearTapTimer),$document.unbind("vmousecancel",clearTapHandlers)}function clickHandler(event){clearTapHandlers(),isTaphold||origTarget!==event.target?isTaphold&&event.preventDefault():triggerCustomEvent(thisObject,"tap",event)}if(isTaphold=!1,event.which&&1!==event.which)return!1;var timer,origTarget=event.target;$this.bind("vmouseup",clearTapTimer).bind("vclick",clickHandler),$document.bind("vmousecancel",clearTapHandlers),timer=setTimeout(function(){$.event.special.tap.emitTapOnTaphold||(isTaphold=!0),triggerCustomEvent(thisObject,"taphold",$.Event("taphold",{target:origTarget}))},$.event.special.tap.tapholdThreshold)})},teardown:function(){$(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),$document.unbind("vmousecancel")}},$.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(event){var winPageX=window.pageXOffset,winPageY=window.pageYOffset,x=event.clientX,y=event.clientY;return 0===event.pageY&&Math.floor(y)>Math.floor(event.pageY)||0===event.pageX&&Math.floor(x)>Math.floor(event.pageX)?(x-=winPageX,y-=winPageY):(y<event.pageY-winPageY||x<event.pageX-winPageX)&&(x=event.pageX-winPageX,y=event.pageY-winPageY),{x:x,y:y}},start:function(event){var data=event.originalEvent.touches?event.originalEvent.touches[0]:event,location=$.event.special.swipe.getLocation(data);return{time:(new Date).getTime(),coords:[location.x,location.y],origin:$(event.target)}},stop:function(event){var data=event.originalEvent.touches?event.originalEvent.touches[0]:event,location=$.event.special.swipe.getLocation(data);return{time:(new Date).getTime(),coords:[location.x,location.y]}},handleSwipe:function(start,stop,thisObject,origTarget){if(stop.time-start.time<$.event.special.swipe.durationThreshold&&Math.abs(start.coords[0]-stop.coords[0])>$.event.special.swipe.horizontalDistanceThreshold&&Math.abs(start.coords[1]-stop.coords[1])<$.event.special.swipe.verticalDistanceThreshold){var direction=start.coords[0]>stop.coords[0]?"swipeleft":"swiperight";return triggerCustomEvent(thisObject,"swipe",$.Event("swipe",{target:origTarget,swipestart:start,swipestop:stop}),!0),triggerCustomEvent(thisObject,direction,$.Event(direction,{target:origTarget,swipestart:start,swipestop:stop}),!0),!0}return!1},eventInProgress:!1,setup:function(){var events,thisObject=this,$this=$(thisObject),context={};events=$.data(this,"mobile-events"),events||(events={length:0},$.data(this,"mobile-events",events)),events.length++,events.swipe=context,context.start=function(event){if(!$.event.special.swipe.eventInProgress){$.event.special.swipe.eventInProgress=!0;var stop,start=$.event.special.swipe.start(event),origTarget=event.target,emitted=!1;context.move=function(event){start&&!event.isDefaultPrevented()&&(stop=$.event.special.swipe.stop(event),emitted||(emitted=$.event.special.swipe.handleSwipe(start,stop,thisObject,origTarget),emitted&&($.event.special.swipe.eventInProgress=!1)),Math.abs(start.coords[0]-stop.coords[0])>$.event.special.swipe.scrollSupressionThreshold&&event.preventDefault())},context.stop=function(){emitted=!0,$.event.special.swipe.eventInProgress=!1,$document.off(touchMoveEvent,context.move),context.move=null},$document.on(touchMoveEvent,context.move).one(touchStopEvent,context.stop)}},$this.on(touchStartEvent,context.start)},teardown:function(){var events,context;events=$.data(this,"mobile-events"),events&&(context=events.swipe,delete events.swipe,events.length--,0===events.length&&$.removeData(this,"mobile-events")),context&&(context.start&&$(this).off(touchStartEvent,context.start),context.move&&$document.off(touchMoveEvent,context.move),context.stop&&$document.off(touchStopEvent,context.stop))}},$.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe.left",swiperight:"swipe.right"},function(event,sourceEvent){$.event.special[event]={setup:function(){$(this).bind(sourceEvent,$.noop)},teardown:function(){$(this).unbind(sourceEvent)}}})}(jQuery,this)}),function(){this.TPSlider=function(sliderWrapper){function retrieveVisibleSlide(slider,sliderControls){return slider.find(".visible")}function nextSlide(slider,sliderControls){var visibleSlide=retrieveVisibleSlide(slider),nextSlide=visibleSlide.next("li").length>0?visibleSlide.next("li"):slider.find("li").eq(0);updateSlide(visibleSlide,nextSlide,"next",sliderControls)}function prevSlide(slider,sliderControls){var visibleSlide=retrieveVisibleSlide(slider),prevSlide=visibleSlide.prev("li").length>0?visibleSlide.prev("li"):slider.find("li").last();updateSlide(visibleSlide,prevSlide,"prev",sliderControls)}function updateSlide(oldSlide,newSlide,direction,controls){oldSlide.removeClass("visible"),newSlide.addClass("visible"),updateNavSlide(newSlide,controls)}function updateNavSlide(actualSlide,controls){var position=actualSlide.index();controls.removeClass("selected").eq(position).addClass("selected")}function elementInViewport(el){for(var top=el.offsetTop,left=el.offsetLeft,width=el.offsetWidth,height=el.offsetHeight;el.offsetParent;)el=el.offsetParent,top+=el.offsetTop,left+=el.offsetLeft;return top<window.pageYOffset+window.innerHeight&&left<window.pageXOffset+window.innerWidth&&top+height>window.pageYOffset&&left+width>window.pageXOffset}TPSlider.prototype.init=function(sliderWrapper){var slider=sliderWrapper.find(".tp-slider"),sliderNav=sliderWrapper.find(".tp-slider-navigation"),sliderControls=sliderWrapper.find(".tp-slider-controls").find("li");sliderNav.on("click",".next-slide",function(event){event.preventDefault(),nextSlide(slider,sliderControls)}),sliderNav.on("click",".prev-slide",function(event){event.preventDefault(),prevSlide(slider,sliderControls)}),slider.on("swipeleft",function(event){nextSlide(slider,sliderControls)}),slider.on("swiperight",function(event){prevSlide(slider,sliderControls)}),sliderControls.on("click",function(event){event.preventDefault();var selectedItem=$(this);if(!selectedItem.hasClass("selected")){var selectedSlidePosition=selectedItem.index(),selectedSlide=slider.children("li").eq(selectedSlidePosition),visibleSlide=retrieveVisibleSlide(slider),visibleSlidePosition=visibleSlide.index(),direction="";direction=selectedSlidePosition>visibleSlidePosition?"next":"prev",updateSlide(visibleSlide,selectedSlide,direction,sliderControls)}}),$(document).keyup(function(event){"37"==event.which&&elementInViewport(slider.get(0))?prevSlide(slider,sliderControls):"39"==event.which&&elementInViewport(slider.get(0))&&nextSlide(slider,sliderControls)})},this.init(sliderWrapper)}}();